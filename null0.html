<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>…</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: 'Roboto Mono', monospace;
    background: #000;
    color: #fff;
}

#container { position: relative; width: 100%; height: 100%; }

iframe#mainframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    z-index: 1;
    opacity: 0;
    transition: opacity 1s ease;
}

.overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 2;
    pointer-events: none;
    overflow: visible;
    background: rgba(0,0,0,0.02);
}

.page {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 2em;
    transition: opacity 1s ease;
    z-index: 3;
}

.active { opacity: 1; }
.hidden { opacity: 0; pointer-events: none; }

h1 { font-size: 4em; color: #ff4444; text-shadow: 0 0 10px #ff0000; }
p { max-width: 600px; font-size: 1.2em; color: #ccc; }
a { color: #ff6666; text-decoration: none; margin-top: 1em; cursor: pointer; }
a:hover { color: #ff0000; text-shadow: 0 0 10px #ff0000; }

.rift {
    position: absolute;
    width: 150px;
    height: 150px;
    border: 2px dashed #ff4444;
    box-shadow: 0 0 20px #ff0000;
    border-radius: 50%;
    opacity: 0.3;
    pointer-events: none;
    z-index: 4;
    transition: transform 0.2s ease, opacity 0.2s ease;
}

.overlay-text {
    position: absolute;
    font-size: 2em;
    color: #ff4444;
    text-shadow: 0 0 10px #ff0000;
    pointer-events: none;
    z-index: 5;
    transition: transform 0.1s linear;
}

.glitch {
    position: absolute;
    font-size: 1.5em;
    color: #ff6666;
    text-shadow: 0 0 5px #ff0000;
    pointer-events: none;
    z-index: 6;
    opacity: 0;
}
</style>
</head>
<body>
<div id="container">
    <iframe id="mainframe" src="/" scrolling="yes"></iframe>
    <div class="overlay" id="overlay"></div>

    <div id="page1" class="page active">
        <h1>…</h1>
        <p>The shadows watch you.<br>Do you really want to leave?</p>
        <a onclick="triggerLeave()">Leave</a>
        <a onclick="alert('Step deeper into the unknown...')">Step Deeper</a>
    </div>
</div>

<script>
const overlay = document.getElementById('overlay');
const rifts = [];
const overlayTexts = [];
const glitchTexts = [];

// Create rifts
for (let i = 0; i < 12; i++) {
    const rift = document.createElement('div');
    rift.className = 'rift';
    rift.style.top = Math.random() * window.innerHeight + 'px';
    rift.style.left = Math.random() * window.innerWidth + 'px';
    rift.style.opacity = 0.1 + Math.random() * 0.3;
    overlay.appendChild(rift);
    rifts.push(rift);
}

// Overlay texts (pinned to page)
const messages = ["If you leave…","You will not return","The shadows follow you"];
messages.forEach((msg, i) => {
    const text = document.createElement('div');
    text.className = 'overlay-text';
    text.innerText = msg;
    text.style.top = (100 + i*200) + 'px';
    text.style.left = (50 + i*250) + 'px';
    overlay.appendChild(text);
    overlayTexts.push(text);
});

// Occasional glitch text for ARG feel
for(let i = 0; i < 5; i++) {
    const g = document.createElement('div');
    g.className = 'glitch';
    g.innerText = ["ERROR","???","§§§","404","!!!"][i%5];
    g.style.top = Math.random()*window.innerHeight + 'px';
    g.style.left = Math.random()*window.innerWidth + 'px';
    overlay.appendChild(g);
    glitchTexts.push(g);
}

function triggerLeave() {
    document.getElementById('page1').classList.add('hidden');
    const iframe = document.getElementById('mainframe');
    iframe.style.opacity = 1;
    history.pushState({}, '', '/');
}

// Sync overlay with iframe scroll with parallax
const iframe = document.getElementById('mainframe');
iframe.addEventListener('load', () => {
    const iframeWindow = iframe.contentWindow;

    function animate() {
        const scrollTop = iframeWindow.scrollY || iframeWindow.pageYOffset || 0;
        const scrollLeft = iframeWindow.scrollX || iframeWindow.pageXOffset || 0;

        // Rift animations
        rifts.forEach((rift, i) => {
            const offsetX = Math.sin(scrollTop*0.01 + i) * 50;
            const offsetY = Math.cos(scrollLeft*0.01 + i) * 50;
            const rotation = scrollTop*0.05 + i*10;
            rift.style.transform = `translate(${offsetX}px, ${offsetY}px) rotate(${rotation}deg) scale(${0.8 + Math.sin(Date.now()*0.002 + i)/5})`;
        });

        // Overlay text pinned to scroll (opposite direction with slight parallax)
        overlayTexts.forEach((text, i) => {
            const parallax = 1 + i*0.05; 
            text.style.transform = `translate(${-scrollLeft*parallax}px, ${-scrollTop*parallax}px)`;
        });

        // Glitch text flicker
        glitchTexts.forEach(g => {
            if(Math.random() < 0.01) {
                g.style.opacity = 0.5 + Math.random()*0.5;
                g.style.top = Math.random()*window.innerHeight + 'px';
                g.style.left = Math.random()*window.innerWidth + 'px';
            } else {
                g.style.opacity = 0;
            }
        });

        // Subtle overlay flicker
        overlay.style.backgroundColor = `rgba(0,0,0,${0.01 + Math.random()*0.02})`;

        requestAnimationFrame(animate);
    }

    animate();
});
</script>
</body>
</html>
